import { combineReducers } from 'redux';
import { connectRouter } from 'connected-react-router';
import { handleActions } from 'redux-actions';

import * as actions from 'actions';
import phones from './phones';
import phone from './phone';
import basket from './basket';
import categories from './categories';

const phonesFetchingState = handleActions({
  [actions.fetchPhonesRequest]: () => 'requested',
  [actions.fetchPhonesSuccess]: () => 'finished',
  [actions.fetchPhonesFailure]: () => 'failed',

}, 'none');

const loadMorePhonesState = handleActions({
  [actions.loadMorePhonesRequest]: () => 'requested',
  [actions.loadMorePhonesSuccess]: () => 'finished',
  [actions.loadMorePhonesFailure]: () => 'failed',
}, 'none');

const fetchingCategoriesState = handleActions({
  [actions.fetchCategoriesRequest]: () => 'request',
  [actions.fetchCategoriesSuccess]: () => 'finished',
  [actions.fetchCategoriesFailure]: () => 'failed',
}, 'none');

export default (history) => combineReducers({
  phonesFetchingState,
  loadMorePhonesState,
  fetchingCategoriesState,
  phones,
  phone,
  basket,
  categories,
  router: connectRouter(history),
});
